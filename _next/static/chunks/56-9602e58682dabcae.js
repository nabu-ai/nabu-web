"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{3753:function(e,n,t){t.r(n),t.d(n,{generateTranslationAudio:function(){return K},pauseMicrophoneRecording:function(){return V},prepareStreaming:function(){return j},processMicrophone:function(){return M},resumeMicrophoneRecording:function(){return z},stopMicrophoneRecording:function(){return W},supportedLanguages:function(){return D},terminateStreaming:function(){return F},translate:function(){return G},version:function(){return _}});const a={"en-AU":"English (Australian)","en-GB":"English (British)","en-NZ":"English (New Zealand)","en-US":"English (US)","fr-FR":"French","fr-CA":"French (Canadian)","de-DE":"German","it-IT":"Italian","ja-JP":"Japanese","ko-KR":"Korean","pt-BR":"Portuguese (Brazilian)","es-ES":"Spanish (European)","es-US":"Spanish (US)"},i={...a,arb:"Arabic","ar-AE":"Arabic (Gulf)","ca-ES":"Catalan","cmn-CN":"Chinese (Mandarin)","cs-CZ":"Czech","da-DK":"Danish","nl-BE":"Dutch (Belgian)","nl-NL":"Dutch","en-AU":"English (Australian)","en-GB":"English (British)","en-IN":"English (Indian)","en-NZ":"English (New Zealand)","en-SG":"English (Singaporean)","en-ZA":"English (South African)","en-US":"English (US)","en-GB-WLS":"English (Welsh)","fi-FI":"Finnish","fr-FR":"French","fr-BE":"French (Belgian)","fr-CA":"French (Canadian)","hi-IN":"Hindi","de-DE":"German","de-AT":"German (Austrian)","de-CH":"German (Swiss standard)","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","ko-KR":"Korean","nb-NO":"Norwegian","pl-PL":"Polish","pt-BR":"Portuguese (Brazilian)","pt-PT":"Portuguese (European)","ro-RO":"Romanian","ru-RU":"Russian","es-ES":"Spanish (Spain)","es-MX":"Spanish (Mexican)","es-US":"Spanish (US)","sv-SE":"Swedish","tr-TR":"Turkish","cy-GB":"Welsh"},r={"en-US":"en-US_Telephony","en-GB":"en-GB_Telephony","en-AU":"en-AU_Telephony","es-ES":"es-ES_Telephony","es-LA":"es-LA_Telephony","fr-FR":"fr-FR_Telephony","fr-CA":"fr-CA_Telephony","de-DE":"de-DE_Telephony","it-IT":"it-IT_Telephony","pt-BR":"pt-BR_Telephony","ja-JP":"ja-JP_Telephony","nl-NL":"nl-NL_Telephony","ko-KR":"ko-KR_Telephony","zh-CN":"zh-CN_Telephony"},o="https://nabu-0390bfe7dc2f.herokuapp.com";class s{initializeWS(e){let{token:n,onConnected:t}=e;this.token=n;const a=this.buildWebSocketUrl();this.ws=new WebSocket(a),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{console.log("Stream Opened:::",(new Date).toLocaleTimeString()),this.ws.send(JSON.stringify({action:"start","content-type":"audio/l16;rate=8000;channels=1",interim_results:!0,smart_formatting:!0,inactivity_timeout:-1})),t&&t()},this.startSendingSilence()}terminateWS(){var e;(null===(e=this.ws)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&(this.ws.send(JSON.stringify({action:"stop"})),this.ws.close())}async start(e){let{onTranscription:n,onError:t,onComplete:a,onConnected:i}=e;this.stopSendingSilence();try{this.ws&&this.ws.readyState===WebSocket.OPEN||this.initializeWS({token:this.token,onConnected:i}),this.ws.onmessage=e=>{const t=JSON.parse(e.data);if(t.results&&t.results.length>0&&t.results[0].final){var a;const e=t.results[0].alternatives[0];n({transcript:null===(a=e.transcript)||void 0===a?void 0:a.trim(),timestamps:e.timestamps,confidence:e.confidence,labels:t.speaker_labels})}},this.ws.onerror=e=>{t&&t(e),console.error("[NABU] StreamingV1 error",e)},this.ws.onclose=()=>{a&&a(),console.log("[NABU] [StreamingV1] closed")},this.stream=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:this.sampleRate}}),this.audioContext=new AudioContext({sampleRate:this.sampleRate}),await this.audioContext.audioWorklet.addModule("./silence-processor.js");const e=this.audioContext.createMediaStreamSource(this.stream);this.processorNode=new AudioWorkletNode(this.audioContext,"silence-detector",{processorOptions:{silenceThreshold:.02,silenceDuration:300,sampleRate:this.sampleRate}}),this.processorNode.port.onmessage=e=>{const{type:n,payload:t}=e.data;"silence"!==n||this.isSilent?"speaking"===n&&this.isSilent?(this.isSilent=!1,this.stopSendingSilence()):"pcm"!==n||this.isSilent||this.ws.readyState!==WebSocket.OPEN||this.ws.send(new Uint8Array(t)):(this.isSilent=!0,this.startSendingSilence())},e.connect(this.processorNode),this.processorNode.connect(this.audioContext.destination),this.processorNode.port.postMessage({type:"start"}),console.log("Ready to stream::",(new Date).toLocaleTimeString()),i&&i()}catch(r){console.error("StreamingV1 start error:",r),this.onError&&this.onError(r)}}stop(){this.processorNode&&this.processorNode.port.postMessage({type:"stop"}),this.stream&&this.stream.getTracks().forEach((e=>e.stop())),this.audioContext&&this.audioContext.close(),this.startSendingSilence()}getSilenceBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const n=this.sampleRate*e/1e3,t=new Int16Array(n);return new Uint8Array(t.buffer)}startSendingSilence(){this.stopSendingSilence();const e=this.getSilenceBuffer(100);this.silenceInterval=setInterval((()=>{this.ws.readyState===WebSocket.OPEN&&this.ws.send(e)}),100)}stopSendingSilence(){this.silenceInterval&&(clearInterval(this.silenceInterval),this.silenceInterval=null)}buildWebSocketUrl(){const e=new URLSearchParams({access_token:this.token,model:this.model,inactivity_timeout:-1});return"".concat("wss://api.us-east.speech-to-text.watson.cloud.ibm.com/instances/866db787-0272-4cdd-9ebe-110e2db04346/v1/recognize","?").concat(e.toString())}constructor({token:e,model:n="en-US_Telephony"}){this.token=e,this.model=n,this.ws=null,this.audioContext=null,this.processorNode=null,this.stream=null,this.sampleRate=8e3,this.silenceInterval=null,this.isSilent=!1}}var l=t(4223),c=t(5796),d=t(3856),u=t.n(d);class g{async start(e,n){let{onData:t,onError:a,onComplete:i,onConnected:r}=n;if(window&&(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),e){const n=await e.arrayBuffer();this.bufferStream=n;const t=await this.audioContext.decodeAudioData(n),a=t.duration;console.log("Duration::::",a),this.bufferSource=this.audioContext.createBufferSource(),this.bufferSource.buffer=t}else this.audioStreams=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),this.audioSource=this.audioContext.createMediaStreamSource(this.audioStreams);const o={numberOfChannels:1,sampleRate:this.audioContext.sampleRate,maxFrameCount:1*this.audioContext.sampleRate/10};try{await this.audioContext.audioWorklet.addModule("./recording-processor.js"),console.log("connected"),r&&r()}catch(m){console.log("Add module error ".concat(m))}if(this.workletNode=new AudioWorkletNode(this.audioContext,"recording-processor",{processorOptions:o}),this.workletNode.port.postMessage({message:"UPDATE_RECORDING_STATE",setRecording:!0}),e)this.bufferSource.connect(this.workletNode).connect(this.audioContext.destination),this.bufferSource.start(),console.log("starting file");else{const e=this.audioContext.createMediaStreamDestination();this.audioSource.connect(this.workletNode).connect(e)}this.workletNode.port.onmessageerror=e=>{console.log("Error receiving message from worklet ".concat(e)),a&&a(e)};const s=u().iterator(this.workletNode.port,"message"),c=e=>{const n=new ArrayBuffer(2*e.length),t=new DataView(n);for(let a=0;a<e.length;a++){const n=Math.max(-1,Math.min(1,e[a]));t.setInt16(2*a,n<0?32768*n:32767*n,!0)}return n};this.command=new l.W({LanguageCode:this.languageCode,MediaEncoding:"pcm",MediaSampleRateHertz:"48000",AudioStream:async function*(){for await(const e of s)if("SHARE_RECORDING_BUFFER"===e.data.message){const n=c(e.data.buffer[0]),t=new Uint8Array(n);yield{AudioEvent:{AudioChunk:t}}}}()});try{const e=await this.streamingClient.send(this.command);if(e.TranscriptResultStream){for await(const n of e.TranscriptResultStream){var d,g;if(null===n||void 0===n||null===(d=n.TranscriptEvent)||void 0===d?void 0:d.Transcript)for(const e of(null===n||void 0===n||null===(g=n.TranscriptEvent)||void 0===g?void 0:g.Transcript.Results)||[])if((null===e||void 0===e?void 0:e.Alternatives)&&(null===e||void 0===e?void 0:e.Alternatives[0].Items)){var h;let n="";for(let t=0;t<(null===e||void 0===e||null===(h=e.Alternatives[0].Items)||void 0===h?void 0:h.length);t++)n+=" ".concat(null===e||void 0===e?void 0:e.Alternatives[0].Items[t].Content);e.IsPartial||(n.endsWith(" .")&&(n=n.replace(" .",".")),n&&t&&t(n))}}i&&i()}}catch(p){a&&a(p)}}async stop(e){let{onStreamingStopped:n}=e;var t;(this.workletNode&&this.workletNode.port.postMessage({message:"UPDATE_RECORDING_STATE",setRecording:!1}),this.audioSource&&this.audioSource.disconnect(this.workletNode),this.bufferSource&&this.bufferSource.disconnect(this.workletNode),this.workletNode&&this.workletNode.disconnect(),this.streamingClient.destroy(),this.audioStreams)&&(null===(t=this.audioStreams.getTracks())||void 0===t||t.forEach((e=>e.stop())),this.audioStreams=null);this.audioContext&&(await this.audioContext.close(),this.audioContext=null),n&&n()}constructor({region:e,credentials:n,languageCode:t="en-US",sampleRate:a=44100}){this.region=e,this.credentials=n,this.languageCode=t,this.sampleRate=a,this.audioContext=null,this.workletNode=null,this.streamingClient=new c.I({region:e,credentials:n}),this.controller=null,this.audioStreams=null,this.bufferStream=null,this.audioSource=null,this.bufferSource=null}}var h=t(7563),m=t.n(h);const p=async()=>{const e="".concat(o,"/get-creds");try{return(await m().get(e)).data}catch(n){return console.error("Error fetching creds:",n),null}};var f=t(7272),S=t(4563);class v{async translateText(e,n,t){try{"cmn-CN"===n&&(n="zh"),"cmn-CN"===t&&(t="zh");const a=new f.r({Text:e,SourceLanguageCode:n,TargetLanguageCode:t});return{translation:(await this.translateClient.send(a)).TranslatedText}}catch(a){return{translationError:a}}}constructor({region:e,credentials:n}){this.region=e,this.credentials=n,this.translateClient=new S.O({region:e,credentials:n})}}t(2781);var w=t(1806),y=t(1843);class I{async audioText(e,n,t,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"mp3";const r=new w.Q({OutputFormat:i,Text:e,VoiceId:n,Engine:t,LanguageCode:a}),{AudioStream:o}=await this.pollyClient.send(r);return o}async fetchLanguages(){return{"fr-BE":{female:{voiceId:"Isabelle",engine:"neural"}},"en-US":{female:{voiceId:"Danielle",engine:"neural"},male:{voiceId:"Gregory",engine:"neural"}},"tr-TR":{female:{voiceId:"Burcu",engine:"neural"}},"cs-CZ":{female:{voiceId:"Jitka",engine:"neural"}},"de-CH":{female:{voiceId:"Sabrina",engine:"neural"}},"es-ES":{female:{voiceId:"Lucia",engine:"neural"},male:{voiceId:"Sergio",engine:"neural"}},"es-US":{female:{voiceId:"Lupe",engine:"neural"},male:{voiceId:"Pedro",engine:"neural"}},"en-SG":{female:{voiceId:"Jasmine",engine:"neural"}},"ko-KR":{female:{voiceId:"Jihye",engine:"neural"}},"sv-SE":{female:{voiceId:"Elin",engine:"neural"}},"ru-RU":{female:{voiceId:"Tatyana",engine:"standard"},male:{voiceId:"Maxim",engine:"standard"}},"ro-RO":{female:{voiceId:"Carmen",engine:"standard"}},"pt-PT":{female:{voiceId:"Ines",engine:"neural"},male:{voiceId:"Cristiano",engine:"standard"}},"pt-BR":{female:{voiceId:"Vitoria",engine:"neural"},male:{voiceId:"Thiago",engine:"neural"}},"pl-PL":{female:{voiceId:"Ola",engine:"neural"},male:{voiceId:"Jan",engine:"standard"}},"nl-BE":{female:{voiceId:"Lisa",engine:"neural"}},"nl-NL":{male:{voiceId:"Ruben",engine:"standard"},female:{voiceId:"Laura",engine:"neural"}},"nb-NO":{female:{voiceId:"Ida",engine:"neural"}},"ja-JP":{female:{voiceId:"Kazuha",engine:"neural"},male:{voiceId:"Takumi",engine:"neural"}},"it-IT":{female:{voiceId:"Bianca",engine:"neural"},male:{voiceId:"Adriano",engine:"neural"}},"is-IS":{male:{voiceId:"Karl",engine:"standard"},female:{voiceId:"Dora",engine:"standard"}},"fr-FR":{male:{voiceId:"Remi",engine:"neural"},female:{voiceId:"Lea",engine:"neural"}},"fr-CA":{female:{voiceId:"Gabrielle",engine:"neural"},male:{voiceId:"Liam",engine:"neural"}},"es-MX":{female:{voiceId:"Mia",engine:"neural"},male:{voiceId:"Andres",engine:"neural"}},"en-GB-WLS":{male:{voiceId:"Geraint",engine:"standard"}},"en-NZ":{female:{voiceId:"Aria",engine:"neural"}},"en-ZA":{female:{voiceId:"Ayanda",engine:"neural"}},"en-IN":{female:{voiceId:"Kajal",engine:"neural"}},"hi-IN":{female:{voiceId:"Kajal",engine:"neural"}},"en-GB":{female:{voiceId:"Emma",engine:"neural"},male:{voiceId:"Brian",engine:"neural"}},"en-AU":{male:{voiceId:"Russell",engine:"standard"},female:{voiceId:"Olivia",engine:"neural"}},"de-DE":{female:{voiceId:"Vicki",engine:"neural"},male:{voiceId:"Daniel",engine:"neural"}},"da-DK":{female:{voiceId:"Sofie",engine:"neural"},male:{voiceId:"Mads",engine:"standard"}},"cy-GB":{female:{voiceId:"Gwyneth",engine:"standard"}},"cmn-CN":{female:{voiceId:"Zhiyu",engine:"neural"}},arb:{female:{voiceId:"Hala",engine:"neural"},male:{voiceId:"Zayd",engine:"neural"}},"ar-AE":{female:{voiceId:"Hala",engine:"neural"},male:{voiceId:"Zayd",engine:"neural"}},"ca-ES":{female:{voiceId:"Arlet",engine:"neural"}},"de-AT":{female:{voiceId:"Hannah",engine:"neural"}},"yue-CN":{female:{voiceId:"Hiujin",engine:"neural"}},"fi-FI":{female:{voiceId:"Suvi",engine:"neural"}},"en-IE":{female:{voiceId:"Niamh",engine:"neural"}}}}formatVoices(e){const n={},t={neural:3,standard:2,generative:1};function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t[e.toLowerCase()]||0}function i(e,t){n[e]||(n[e]={});const i=t.Gender.toLowerCase(),r=t.Id||t.VoiceId,o=t.SupportedEngines||(t.Engine?[t.Engine]:[]),s=o.includes("neural")?"neural":o.includes("standard")?"standard":o[0]||"",l=a(s);if("female"===i){const t=n[e].female,i=a(null===t||void 0===t?void 0:t.engine);(!t||l>i)&&(n[e].female={voiceId:r,engine:s})}if("male"===i){const t=n[e].male,i=a(null===t||void 0===t?void 0:t.engine);(!t||l>i)&&(n[e].male={voiceId:r,engine:s})}}for(const[r,o]of Object.entries(e))for(const e of o)if(i(r,e),Array.isArray(e.AdditionalLanguageCodes))for(const n of e.AdditionalLanguageCodes)i(n,e);return n}async fetchVoiceAndEngine(e,n){return{voice:"",engine:""}}async getVoiceIdAndEngine(e,n){return await this.getVoices(e,n)}async getVoices(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const t=await this.fetchLanguages(),{male:a,female:i}=t[e];return(a||i)&&n?"male"===n&&a?a:"female"===n&&i?i:"male"!==n||a?"female"!==n||i?void 0:a:i:{}}constructor({region:e,credentials:n,languageCode:t,gender:a}){return this.region=e,this.credentials=n,this.languageCode=t,this.gender=a,this.pollyClient=new y.z({region:e,credentials:n}),I.instance||(I.instance=this),I.instance}}new class{on(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n)}emit(e,n){(this.listeners[e]||[]).forEach((e=>e(n)))}off(e,n){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter((e=>e!==n)))}constructor(){this.listeners={}}};let C,E,A={};const L=async e=>{if(Object.keys(a).includes(e)){const{access_token:n}=await(async e=>{const n="".concat(o,"/get-token?serviceName=").concat(e);try{return(await m().get(n)).data}catch(t){return console.error("Error fetching access token:",t),null}})("stt");C=new s({token:n,model:r[e]||null}),C.initializeWS({token:n})}},T=async e=>{let{sourceLanguage:n,targetLanguage:t,audioHeardAs:a,output:i,onProcessed:r,onError:o,onConnected:s}=e;return await O({sourceLanguage:n,targetLanguage:t,audioHeardAs:a,output:i,onProcessed:r,onError:o,onConnected:s})},k=async e=>{let{onPaused:n}=e;if(C&&C instanceof s)return await C.pause({onPaused:n})},R=async e=>{let{onResumed:n}=e;if(C&&C instanceof s)return await C.resume({onResumed:n})},N=async e=>{let{onStopped:n}=e;return C&&C instanceof s?await b({onStopped:n}):E&&E instanceof g?await P({onStopped:n}):void 0},b=async e=>{let{onStopped:n}=e;C&&C instanceof s&&await C.stop({onStreamingStopped:()=>{C=null,n()}})},P=async e=>{let{onStopped:n}=e;E&&E instanceof g&&await E.stop({onStreamingStopped:()=>{E=null,n()}})},O=async e=>{let{sourceLanguage:n,targetLanguage:t,audioHeardAs:a,output:i,onProcessed:r,onError:o,onConnected:s}=e;E=new g({region:A.region,credentials:A.credentials,languageCode:n}),await E.start(null,{onData:async e=>{if("transcriptOnly"===i)r({transcript:e});else if("translateOnly"===i){const{translation:a,translationError:i}=await x({transcript:data.transcript,sourceLanguage:n,targetLanguage:t});i?o&&o(i):r({transcript:e,translation:a})}else if("audioOnly"===i){const i=await U({transcript:e,sourceLanguage:n,targetLanguage:t,audioHeardAs:a});r(i)}},onError:e=>{o&&o("[NABU StreamingV1] error:",e)},onComplete:()=>{},onConnected:()=>{s&&s()}})},x=async e=>{let{transcript:n,sourceLanguage:t,targetLanguage:a}=e;const i=new v({region:A.region,credentials:A.credentials}),{translation:r,translationError:o}=await i.translateText(n,t,a);return{translation:r,translationError:o}},U=async e=>{let{transcript:n,sourceLanguage:t,targetLanguage:a,audioHeardAs:i,onTranslated:r,onProcessed:o,onError:s}=e;return await B({transcript:n,sourceLanguage:t,targetLanguage:a,audioHeardAs:i,onTranslated:r,onProcessed:o,onError:s})},B=async e=>{let{transcript:n,sourceLanguage:t,targetLanguage:a,audioHeardAs:i,onTranslated:r,onProcessed:o,onError:s}=e;const{translation:l,translationError:c}=await x({transcript:n,sourceLanguage:t,targetLanguage:a});c&&s&&s({message:c}),r&&r({translation:l,translationError:c});const d=await H({text:l,targetLanguage:a,audioHeardAs:i});o&&d&&o({translation:l,audio:d})},H=async e=>{let{text:n,targetLanguage:t,audioHeardAs:a}=e;const i=new I({region:A.region,credentials:A.credentials,languageCode:t,gender:a}),{voiceId:r,engine:o}=await i.getVoiceIdAndEngine(t,a),s=await i.audioText(n,r,o,t,"mp3");return new Blob([await s.transformToByteArray()],{type:"audio/mpeg"})};const _=t(9079).env.npm_package_version,D=i,M=async e=>{let{sourceLanguage:n,targetLanguage:t,audioHeardAs:a,output:i,onProcessed:r,onError:o,onConnected:s}=e;const l=await(async e=>{let{sourceLanguage:n,targetLanguage:t,audioHeardAs:a,output:i,onProcessed:r,onError:o,onConnected:s}=e;if(!(null===A||void 0===A?void 0:A.region)){const e=await p();A={region:e.region,credentials:{accessKeyId:e.apiKey,secretAccessKey:e.secretKey}}}return await T({sourceLanguage:n,targetLanguage:t,audioHeardAs:a,output:i,onProcessed:r,onError:o,onConnected:s})})({sourceLanguage:n,targetLanguage:t,audioHeardAs:a,output:i,onProcessed:r,onError:o,onConnected:s});return l},G=async e=>{let{text:n,sourceLanguage:t,targetLanguage:a,onProcessed:i,onError:r}=e;const o=await(async e=>{let{text:n,sourceLanguage:t,targetLanguage:a,onProcessed:i,onError:r}=e;if(!(null===A||void 0===A?void 0:A.region)){const e=await p();A={region:e.region,credentials:{accessKeyId:e.apiKey,secretAccessKey:e.secretKey}}}const{translation:o,translationError:s}=await x({transcript:n,sourceLanguage:t,targetLanguage:a});s?r&&r(s):i({translation:o})})({text:n,sourceLanguage:t,targetLanguage:a,onProcessed:i,onError:r});return o},K=async e=>{let{text:n,sourceLanguage:t,targetLanguage:a,audioHeardAs:i,onTranslated:r,onProcessed:o,onError:s}=e;const l=await(async e=>{let{text:n,sourceLanguage:t,targetLanguage:a,audioHeardAs:i,onTranslated:r,onProcessed:o,onError:s}=e;if(!(null===A||void 0===A?void 0:A.region)){const e=await p();A={region:e.region,credentials:{accessKeyId:e.apiKey,secretAccessKey:e.secretKey}}}return await U({transcript:n,sourceLanguage:t,targetLanguage:a,audioHeardAs:i,onTranslated:r,onProcessed:o,onError:s})})({text:n,sourceLanguage:t,targetLanguage:a,audioHeardAs:i,onTranslated:r,onProcessed:o,onError:s});return l},W=async e=>{let{onStopped:n}=e;return await(async e=>{let{onStopped:n}=e;return await N({onStopped:n})})({onStopped:n})},j=async e=>await L(e),F=async e=>await(async()=>{Object.keys(a).includes(sourceLanguage)&&C&&C.terminateWS()})(),V=async e=>{let{onPaused:n}=e;return await(async e=>{let{onPaused:n}=e;return await k({onPaused:n})})({onPaused:n})},z=async e=>{let{onResumed:n}=e;return await(async e=>{let{onResumed:n}=e;return await R({onResumed:n})})({onResumed:n})}},4095:function(e,n,t){t.d(n,{E:function(){return a}});const a=(0,t(2574).U)((e=>({muted:!0,videoEnabled:!1,raisedHands:{},mutedUsers:{},activeSpeakerUid:null,toggleMute:()=>e((e=>({muted:!e.muted}))),toggleVideo:()=>e((e=>({videoEnabled:!e.videoEnabled}))),raiseHand:n=>e((e=>{var t;const a=null!==(t=e.raisedHands[n])&&void 0!==t&&t;return{raisedHands:{...e.raisedHands,[n]:!a}}})),muteUser:n=>e((e=>{var t;const a=null!==(t=e.mutedUsers[n])&&void 0!==t&&t;return{mutedUsers:{...e.mutedUsers,[n]:!a}}})),setActiveSpeaker:n=>e((()=>({activeSpeakerUid:n}))),agoraInstance:null,agoraClient:null,setAgoraInstance:n=>e((()=>({agoraInstance:n}))),setAgoraClient:n=>e((()=>({agoraInstance:n}))),isChatOpen:!1,isTranscriptOpen:!1,isParticipantsOpen:!1,toggleChat:()=>e((e=>({isChatOpen:!e.isChatOpen,isParticipantsOpen:!1,isTranscriptOpen:!1}))),toggleTranscript:()=>e((e=>({isTranscriptOpen:!e.isTranscriptOpen,isParticipantsOpen:!1,isChatOpen:!1}))),toggleParticipants:()=>e((e=>({isParticipantsOpen:!e.isParticipantsOpen,isChatOpen:!1,isTranscriptOpen:!1}))),messages:[],addMessage:(n,t,a)=>e((e=>({messages:[...e.messages,{uid:n,text:t,sourceLanguage:a,time:(new Date).toLocaleTimeString()}]}))),transcripts:[],addTranscript:(n,t,a,i)=>e((e=>({transcripts:[...e.transcripts,{uid:n,transcript:t,sourceLanguage:a,audioHeardAs:i,time:(new Date).toLocaleTimeString()}]}))),meetingInfo:{},setMeetingInfo:n=>e((()=>({meetingInfo:n}))),setHandState:(n,t)=>e((e=>({raisedHands:t?{...e.raisedHands,[n]:!0}:Object.fromEntries(Object.entries(e.raisedHands).filter((e=>{let[t]=e;return t!==n})))}))),setMuteState:(n,t)=>e((e=>({mutedUsers:t?{...e.mutedUsers,[n]:!0}:Object.fromEntries(Object.entries(e.mutedUsers).filter((e=>{let[t]=e;return t!==n})))})))})))}}]);