(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[918],{4303:function(e,t,a){Promise.resolve().then(a.bind(a,3253))},3253:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return U}});var r=a(3827),n=a(4090),s=a(4095);function o(e,t,a,r,o){const i=(0,s.E)((e=>e.agoraInstance));let l=(0,s.E)((e=>e.agoraClient));const c=(0,n.useRef)(null),[d,u]=(0,n.useState)([]),[g,h]=(0,n.useState)([]),x=(0,n.useRef)(!1),p=()=>{h([...l.remoteUsers])};(0,n.useEffect)((()=>{(async()=>{if(!x.current)try{await l.join(e,a,t,r),x.current=!0;const n=await i.createCameraVideoTrack();n.setEnabled(o),c.current=n,u([null,n]),await l.publish([n]);for(const e of l.remoteUsers)e.hasVideo&&await l.subscribe(e,"video").catch((()=>{}));p(),l.on("user-joined",p),l.on("user-published",(async(e,t)=>{await l.subscribe(e,t).catch((()=>{})),p()})),l.on("user-unpublished",p),l.on("user-left",p),l.on("user-updated",p)}catch(n){console.error("[Agora Error] Failed to start video-only session:",n),x.current=!1}})();return()=>{var e,t;null===(e=c.current)||void 0===e||e.stop(),null===(t=c.current)||void 0===t||t.close(),null===l||void 0===l||l.leave().catch((()=>{})),x.current=!1}}),[]);const f=(0,s.E)((e=>e.videoEnabled));return(0,n.useEffect)((()=>{var e,t;null===(t=c.current)||void 0===t||null===(e=t.setEnabled)||void 0===e||e.call(t,f)}),[f]),{localTracks:d,remoteUsers:g}}function i(e){let{user:t,isLocal:a}=e;var o,i;const l=(0,n.useRef)(null),{raisedHands:c,mutedUsers:d,activeSpeakerUid:u,videoEnabled:g}=(0,s.E)(),h=c[t.uid],x=u===t.uid,p=d[t.uid],f=a?g:t.hasVideo,m=!t.videoTrack||!f;(0,n.useEffect)((()=>{const e=l.current;if(!m&&e&&(null===t||void 0===t?void 0:t.videoTrack)&&"function"===typeof t.videoTrack.play){e.innerHTML="";try{t.videoTrack.play(e)}catch(a){console.warn("Video play error for ".concat(t.uid,":"),a)}}else e&&(e.innerHTML="");return()=>{(null===t||void 0===t?void 0:t.videoTrack)&&"function"===typeof t.videoTrack.stop&&t.videoTrack.stop(),e&&(e.innerHTML="")}}),[t.videoTrack,t.uid,f]);const y=((null===t||void 0===t||null===(i=t.uid)||void 0===i||null===(o=i.toString)||void 0===o?void 0:o.call(i).charAt(0))||"?").toUpperCase();return(0,r.jsxs)("div",{className:"relative aspect-video rounded-xl overflow-hidden bg-black shadow ".concat(x?"ring-4 ring-green-700":""),children:[f?(0,r.jsx)("div",{ref:l,className:"w-full h-full"}):(0,r.jsx)("span",{className:"w-full h-full flex items-center justify-center text-white text-2xl bg-gray-800",children:y}),p&&(0,r.jsx)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-60 p-1 rounded-full",children:"\ud83d\udeab\ud83c\udfa4"}),(0,r.jsxs)("div",{className:"absolute bottom-2 left-2 text-xs bg-black bg-opacity-60 text-white px-2 py-1 rounded",children:["".concat(t.uid)," ",h&&"\u270b"]})]})}var l=a(7977);const c=(0,l.Z)("mic-off",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),d=(0,l.Z)("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),u=(0,l.Z)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),g=(0,l.Z)("video-off",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),h=(0,l.Z)("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),x=(0,l.Z)("phone-off",[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]]),p=(0,l.Z)("message-circle-more",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h.01",key:"czm47f"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 12h.01",key:"1l6xoz"}]]),f=(0,l.Z)("message-square-text",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M13 8H7",key:"14i4kc"}],["path",{d:"M17 12H7",key:"16if0g"}]]),m=(0,l.Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var y=a(4289);const v=a(3753),{processMicrophone:b,stopMicrophoneRecording:j}=v;function k(e){let{uid:t,roomName:a}=e;const{raiseHand:o,muteUser:i}=(0,s.E)(),l=(0,s.E)((e=>e.meetingInfo)),v=(0,s.E)((e=>e.raisedHands[t])),k=(0,s.E)((e=>e.mutedUsers[t])),w=(0,s.E)((e=>e.muted)),N=((0,s.E)((e=>e.toggleMute)),(0,s.E)((e=>e.videoEnabled))),E=(0,s.E)((e=>e.toggleVideo)),S=(0,s.E)((e=>e.toggleChat)),M=(0,s.E)((e=>e.toggleTranscript)),T=(0,s.E)((e=>e.toggleParticipants)),C=(0,s.E)((e=>e.addTranscript)),A=(0,n.useRef)(!1),[L,U]=(0,n.useState)(0),[P,O]=(0,n.useState)(!0);(0,n.useEffect)((()=>{A.current||(A.current=!0,w&&(i(t),console.log("[NABU] Muting user, ".concat(t," by default")),(0,y.vP)(t,!0)));const e=(0,y.e$)(((e,t)=>{s.E.getState().setHandState(e,t)})),a=(0,y.Ie)(((e,t)=>{s.E.getState().setMuteState(e,t)}));return()=>{e(),a()}}),[]),(0,n.useEffect)((()=>{const e=setInterval((()=>{U((e=>e+1))}),1e3);return()=>clearInterval(e)}),[]);const H=e=>{s.E.getState().setActiveSpeaker(t),console.log("Data response::",e),(null===e||void 0===e?void 0:e.transcript)&&((0,y.aT)(t,e.transcript,l.language,l.gender),C(t,e.transcript,l.language,l.gender))},W=()=>{console.log("[NABU] Connected callback"),O(!1)},V=()=>{},Z=()=>{console.log("microphone stopped")};return(0,r.jsxs)("div",{className:"fixed top-1/2 right-4 transform -translate-y-1/2 flex flex-col items-center space-y-4 z-50 text-white",children:[(0,r.jsx)("div",{className:"mb-6 text-sm font-semibold text-gray-300",children:a}),!l.nonVerbal&&(0,r.jsx)("button",{title:k?"Unmute":"Mute",onClick:()=>{if(k){O(!0);const e="transcriptOnly",t={sourceLanguage:l.language,targetLanguage:null,audioHeardAs:l.gender,output:e,onProcessed:H,onError:V,onConnected:W};b(t)}else O(!1),j({onStopped:Z});i(t),(0,y.vP)(t,!k)},className:"p-3 hover:bg-gray-600 rounded-full text-white ".concat(k?"bg-red-600":P?"bg-gray-700":"bg-green-700"),children:k?(0,r.jsx)(c,{}):(0,r.jsx)(d,{})}),(0,r.jsx)("button",{title:N?"Video On":"Video Off",onClick:E,className:"p-3 hover:bg-gray-600 rounded-full text-white ".concat(N?"bg-green-700":"bg-red-600"),children:N?(0,r.jsx)(u,{}):(0,r.jsx)(g,{})}),(0,r.jsx)("button",{title:v?"Put hand down":"Raise Hand",onClick:()=>{o(t),(0,y.SQ)(t,!v)},className:"p-3 hover:bg-gray-600 rounded-full text-white ".concat(v?"bg-yellow-600":"bg-gray-700"),children:(0,r.jsx)(h,{})}),(0,r.jsx)("button",{title:"Leave",onClick:()=>{O(!1),j({onStopped:Z}),window.location.href="/nabu-web/lobby"},className:"p-3 bg-red-600 hover:bg-red-500 rounded-full text-white",children:(0,r.jsx)(x,{})}),(0,r.jsx)("div",{className:"border-t border-gray-500 w-8 my-4"}),(0,r.jsx)("button",{onClick:S,title:"Chat",className:"p-3 bg-gray-700 hover:bg-gray-600 rounded-full text-white",children:(0,r.jsx)(p,{})}),(0,r.jsx)("button",{onClick:M,title:"Transcripts",className:"p-3 bg-gray-700 hover:bg-gray-600 rounded-full text-white",children:(0,r.jsx)(f,{})}),(0,r.jsx)("button",{onClick:T,title:"Participants",className:"p-3 bg-gray-700 hover:bg-gray-600 rounded-full text-white",children:(0,r.jsx)(m,{})}),(0,r.jsx)("div",{className:"mt-auto text-sm text-gray-400 pt-6",children:(e=>{const t=Math.floor(e/60).toString().padStart(2,"0"),a=(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(a)})(L)})]})}const w=(0,l.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),N=(0,l.Z)("send-horizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]]),E=a(3753);function S(e){let{uid:t,room:a}=e;const o=(0,s.E)((e=>e.isChatOpen)),i=(0,s.E)((e=>e.messages)),l=(0,s.E)((e=>e.addMessage)),c=(0,s.E)((e=>e.toggleChat)),d=(0,s.E)((e=>e.meetingInfo)),[u,g]=(0,n.useState)("");(0,n.useEffect)((()=>{const{translate:e}=E,t=(0,y.SS)(((t,a,r)=>{const n={text:a,sourceLanguage:r,targetLanguage:d.language,onProcessed:e=>{const{translation:a}=e;s.E.getState().addMessage(t,a,d.language)},onError:e=>{console.log("Error:::",e)}};e(n)}));return t}),[]);const h=()=>{u.trim()&&((0,y.bE)(t,u.trim(),d.language),l(t,u.trim(),d.language),g(""))};return o?(0,r.jsxs)("div",{className:"w-1/4 flex flex-col rounded-xl bg-white text-black shadow-lg  border-l m-4 ml-0",children:[(0,r.jsxs)("div",{className:"flex justify-between font-bold border-b",children:[(0,r.jsx)("div",{className:"p-4 text-lg ",children:"Chat Messages"}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center",onClick:()=>c(),children:(0,r.jsx)(w,{})})})]}),(0,r.jsx)("div",{className:"flex-1 p-4 overflow-y-auto space-y-2",children:i.map(((e,a)=>(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500 flex  w-full max-w-xs gap-4",children:[(0,r.jsx)("span",{children:(0,r.jsx)("b",{children:e.uid===t?"You":e.uid})}),(0,r.jsx)("span",{children:e.time})]}),(0,r.jsx)("div",{className:"p-2 pl-0 rounded-lg text-sm",children:e.text})]},a)))}),(0,r.jsx)("div",{className:"p-4 flex",children:(0,r.jsxs)("div",{className:"flex items-center p-2 border border-gray-300 rounded-full  w-full",children:[(0,r.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h()},className:"flex-1 p-2 outline-none bg-transparent",placeholder:"Type a message..."}),(0,r.jsx)("button",{className:"p-2 text-gray-500 hover:text-blue-500",onClick:h,children:(0,r.jsx)(N,{})})]})})]}):null}const M=(0,l.Z)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function T(e){let{localUid:t,localName:a,remoteUsers:n}=e;const o=(0,s.E)((e=>e.isParticipantsOpen)),i=(0,s.E)((e=>e.raisedHands)),l=(0,s.E)((e=>e.muted)),u=(0,s.E)((e=>e.toggleParticipants));if(!o)return null;const g=[{uid:t,isLocal:!0,muted:l,name:a},...n.map((e=>{var t;return{uid:e.uid,name:e.name,isLocal:!1,muted:!0!==(null===(t=e.audioTrack)||void 0===t?void 0:t.isPlaying)}}))];return(0,r.jsxs)("div",{className:"w-1/4 flex flex-col rounded-xl bg-white text-black shadow-lg  border-l m-4 ml-0",children:[(0,r.jsxs)("div",{className:"flex justify-between font-bold border-b",children:[(0,r.jsx)("div",{className:"p-4 text-lg ",children:"Participants"}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center",onClick:()=>u(),children:(0,r.jsx)(w,{})})})]}),(0,r.jsx)("div",{className:"space-y-3",children:g.map(((e,t)=>{return(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 m-2 rounded-md bg-gray-100",children:[(0,r.jsx)("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-500 text-white font-bold",children:(a=e.uid,null===a||void 0===a?void 0:a.split(" ").map((e=>e[0])).join("").toUpperCase())}),(0,r.jsxs)("div",{className:"flex-1 mx-3",children:[(0,r.jsxs)("p",{className:"text-sm font-medium",children:[e.isLocal?"You":"".concat(e.uid)," ",i[e.uid]&&"\u270b"]}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:e.uid?"joined":"NA"})]}),(0,r.jsxs)("div",{className:"flex space-x-2 text-gray-400",children:[(0,r.jsx)("button",{className:"hover:text-white",children:e.muted?(0,r.jsx)(c,{}):(0,r.jsx)(d,{})}),(0,r.jsx)("button",{className:"hover:text-red-500",children:(0,r.jsx)(M,{className:"w-5 h-5"})})]})]},t);var a}))})]})}class C{enqueue(e){this.queue.push(e),this.isPlaying||this.playNext()}async playNext(){if(0===this.queue.length)return void(this.isPlaying=!1);this.isPlaying=!0;const e=this.queue.shift();try{await this.playAudio(e)}catch(t){console.error("Failed to play audio:",t)}this.playNext()}playAudio(e){return new Promise((t=>{e.onended=()=>t(),e.onerror=()=>t(),e.play().catch((()=>t()))}))}constructor(){this.queue=[],this.isPlaying=!1}}const A=a(3753);function L(e){let{uid:t}=e;const a=(0,s.E)((e=>e.isTranscriptOpen)),o=(0,s.E)((e=>e.transcripts)),i=(0,s.E)((e=>e.meetingInfo)),l=(0,s.E)((e=>e.addTranscript)),c=(0,s.E)((e=>e.mutedUsers[t])),d=new C,u=(0,s.E)((e=>e.toggleTranscript)),[g,h]=(0,n.useState)("");(0,n.useEffect)((()=>{const e=(0,y.wQ)(((e,t,a,r)=>{if(i.hearingImpaired){const{translate:r}=A;r({text:t,sourceLanguage:a,targetLanguage:i.language,onProcessed:t=>{const{translation:a}=t;s.E.getState().addTranscript(e,a,i.language,i.gender)},onError:e=>{console.log("Error:::",e)}})}else{const{generateTranslationAudio:n}=A;n({text:t,sourceLanguage:a,targetLanguage:i.language,audioHeardAs:r,onTranslated:t=>{const{translation:a}=t;s.E.getState().addTranscript(e,a,i.language,i.gender)},onProcessed:e=>{const{audio:t}=e;if(t){console.log("Audio received on:::",(new Date).toLocaleTimeString());const e=new Audio(URL.createObjectURL(t));d.enqueue(e)}},onError:e=>{console.log("Error:::",e)}})}}));return e}),[]);const x=()=>{g.trim()&&((0,y.aT)(t,g.trim(),i.language,i.gender),l(t,g.trim(),i.language,i.gender),h(""))};return a?(0,r.jsxs)("div",{className:"w-1/4 flex flex-col rounded-xl bg-white text-black shadow-lg  border-l m-4 ml-0",children:[(0,r.jsxs)("div",{className:"flex justify-between font-bold border-b",children:[(0,r.jsx)("div",{className:"p-4 text-lg ",children:"Transcripts"}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 inline-flex justify-center items-center",onClick:()=>u(),children:(0,r.jsx)(w,{})})})]}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{className:"flex-1 p-4 overflow-y-auto space-y-2",children:o.map(((e,a)=>(0,r.jsxs)("div",{className:"flex flex-col items-start",children:[(0,r.jsxs)("div",{className:"text-xs text-gray-500 flex  w-full max-w-xs gap-4",children:[(0,r.jsx)("span",{children:(0,r.jsx)("b",{children:e.uid===t?"You":e.uid})}),(0,r.jsx)("span",{children:e.time})]}),(0,r.jsx)("div",{className:"p-2 pl-0 rounded-lg text-xs",children:e.transcript})]},a)))}),c&&(0,r.jsx)("div",{className:"p-4 flex",children:(0,r.jsxs)("div",{className:"flex items-center p-2 border border-gray-300 rounded-full  w-full",children:[(0,r.jsx)("input",{type:"text",value:g,onChange:e=>h(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()},className:"flex-1 p-2 outline-none bg-transparent",placeholder:"Type transcript..."}),(0,r.jsx)("button",{className:"p-2 text-gray-500 hover:text-blue-500",onClick:x,children:(0,r.jsx)(N,{})})]})})]}):null}function U(){const e=(0,s.E)((e=>e.meetingInfo)),t=e.name||"Guest",a=(e.language,e.room),n=t,{localTracks:l,remoteUsers:c}=o(e.appId,e.token,a,t,!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex h-screen bg-gray-900 text-white pr-20",children:[(0,r.jsx)("div",{className:"flex-1 flex p-4 w-full bg-white rounded-xl m-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 w-full transition-all",children:[l[1]&&(0,r.jsx)(i,{user:{name:String(t),uid:String(n),videoTrack:l[1]},isLocal:!0}),c.map((e=>(0,r.jsx)(i,{user:{name:String(t),uid:String(e.uid),videoTrack:e.videoTrack,hasVideo:e.hasVideo},isLocal:!1},String(e.uid))))]})}),(0,r.jsx)(S,{uid:n,room:a}),(0,r.jsx)(L,{uid:n}),(0,r.jsx)(T,{localUid:n,localName:t,remoteUsers:c})]}),(0,r.jsx)(k,{uid:n,roomName:a})]})}},8504:function(e,t,a){"use strict";a.d(t,{J:function(){return r}});const r="https://nabu-0390bfe7dc2f.herokuapp.com"},7977:function(e,t,a){"use strict";a.d(t,{Z:function(){return c}});var r=a(4090);const n=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,t,a)=>a?a.toUpperCase():t.toLowerCase())))(e);return t.charAt(0).toUpperCase()+t.slice(1)},s=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t)).join(" ").trim()},o=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,r.forwardRef)(((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:u,iconNode:g,...h}=e;return(0,r.createElement)("svg",{ref:t,...i,width:n,height:n,stroke:a,strokeWidth:c?24*Number(l)/Number(n):l,className:s("lucide",d),...!u&&!o(h)&&{"aria-hidden":"true"},...h},[...g.map((e=>{let[t,a]=e;return(0,r.createElement)(t,a)})),...Array.isArray(u)?u:[u]])})),c=(e,t)=>{const a=(0,r.forwardRef)(((a,o)=>{let{className:i,...c}=a;return(0,r.createElement)(l,{ref:o,iconNode:t,className:s("lucide-".concat((d=n(e),d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),i),...c});var d}));return a.displayName=n(e),a}},4289:function(e,t,a){"use strict";a.d(t,{Ie:function(){return m},SQ:function(){return u},SS:function(){return f},aT:function(){return x},bE:function(){return g},e$:function(){return p},vP:function(){return h},wQ:function(){return y},yt:function(){return d}});var r=a(4095),n=a(8504);let s=null;const o=new Set,i=new Set,l=new Set,c=new Set;function d(e,t){return s||(s=new WebSocket("".concat(n.J,"?room=").concat(e,"&uid=").concat(t)),s.onopen=()=>{console.log("[NABU WS] Connected to room ".concat(e)),setInterval((()=>{s&&s.readyState===WebSocket.OPEN&&s.send("keep-alive")}),3e4)},s.onerror=a=>{console.error("[NABU WS] WebSocket error",a),s.close(),s=null,console.error("[NABU WS] WebSocket Reconnecting",a),s=new WebSocket("".concat(n.J,"?room=").concat(e,"&uid=").concat(t))},s.onclose=()=>{console.warn("[NABU WS] Disconnected"),s=null},s.onmessage=e=>{try{const t=JSON.parse(e.data);if("hand"===t.type)o.forEach((e=>e(t.uid,t.raised)));else if("chat"===t.type)i.forEach((e=>e(t.uid,t.text,t.sourceLanguage)));else if("mute"===t.type)l.forEach((e=>e(t.uid,t.muted)));else if("transcript"===t.type){r.E.getState().setActiveSpeaker(t.uid),c.forEach((e=>e(t.uid,t.transcript,t.sourceLanguage,t.audioHeardAs)))}else if("room-state"===t.type){const{raisedHands:e,mutedUsers:a}=t,n=r.E.getState();Object.entries(e||{}).forEach((e=>{let[t,a]=e;n.setHandState(t,a)})),Object.entries(a||{}).forEach((e=>{let[t,a]=e;n.setMuteState(t,a)}))}}catch(t){console.warn("[NABU WS] Invalid message",e.data)}},s)}function u(e,t){s&&s.readyState===WebSocket.OPEN&&s.send(JSON.stringify({type:"hand",uid:e,raised:t}))}function g(e,t,a){s&&s.readyState===WebSocket.OPEN&&s.send(JSON.stringify({type:"chat",uid:e,text:t,sourceLanguage:a}))}function h(e,t){s&&s.readyState===WebSocket.OPEN&&(console.log("[NABU] Sending Mute for user, ".concat(e," with state: ").concat(t)),s.send(JSON.stringify({type:"mute",uid:e,muted:t})))}function x(e,t,a,r){s&&s.readyState===WebSocket.OPEN&&s.send(JSON.stringify({type:"transcript",uid:e,transcript:t,sourceLanguage:a,audioHeardAs:r}))}function p(e){return o.add(e),()=>{o.delete(e)}}function f(e){return i.add(e),()=>{i.delete(e)}}function m(e){return l.add(e),()=>{l.delete(e)}}function y(e){return c.add(e),()=>{c.delete(e)}}}},function(e){e.O(0,[37,56,971,69,744],(function(){return t=4303,e(e.s=t);var t}));var t=e.O();_N_E=t}]);