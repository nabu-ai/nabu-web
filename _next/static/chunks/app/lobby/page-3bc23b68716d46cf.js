(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[494],{925:function(e,a,n){Promise.resolve().then(n.bind(n,7165))},7165:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return h}});var t=n(3827),r=n(4090),s=n(5313);const i=(0,n(7977).Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var l=n(8504),o=n(1645);const c={arb:{female:"Zeina"},"ar-AE":{female:"Hala",male:"Zayd"},"ca-ES":{female:"Arlet"},"cs-CZ":{female:"Jitka"},"cy-GB":{female:"Gwyneth"},"da-DK":{female:"Sofie",male:"Mads"},"de-AT":{female:"Hannah"},"de-CH":{female:"Sabrina"},"de-DE":{female:"Vicki",male:"Daniel"},"en-AU":{female:"Olivia",male:"Russell"},"en-GB":{female:"Amy",male:"Brian"},"en-GB-WLS":{male:"Geraint"},"en-IN":{female:"Kajal"},"en-IE":{female:"Niamh"},"en-NZ":{female:"Aria"},"en-SG":{female:"Jasmine"},"en-US":{female:"Joanna",male:"Matthew"},"en-ZA":{female:"Ayanda"},"es-ES":{female:"Lucia",male:"Sergio"},"es-MX":{female:"Mia",male:"Andr\xe9s"},"es-US":{female:"Lupe",male:"Pedro"},"fi-FI":{female:"Suvi"},"fr-BE":{female:"Isabelle"},"fr-CA":{female:"Gabrielle",male:"Liam"},"fr-FR":{female:"L\xe9a",male:"R\xe9mi"},"hi-IN":{female:"Kajal"},"is-IS":{female:"D\xf3ra",male:"Karl"},"it-IT":{female:"Bianca",male:"Adriano"},"ja-JP":{female:"Kazuha",male:"Takumi"},"ko-KR":{female:"Seoyeon"},"nb-NO":{female:"Ida"},"nl-BE":{female:"Lisa"},"nl-NL":{female:"Laura",male:"Ruben"},"pl-PL":{female:"Ola",male:"Jacek"},"pt-BR":{female:"Camila",male:"Thiago"},"pt-PT":{female:"In\xeas",male:"Cristiano"},"ro-RO":{female:"Carmen"},"ru-RU":{female:"Tatyana",male:"Maxim"},"sv-SE":{female:"Elin"},"tr-TR":{female:"Burcu"},"yue-CN":{female:"Hiujin"},"cmn-CN":{female:"Zhiyu"}},u={"en-US":{male:"en-US_HenryV3Voice",female:"en-US_AllisonV3Voice"},"en-GB":{male:"en-GB_JamesV3Voice",female:"en-GB_KateV3Voice"},"en-AU":{male:"en-AU_JackExpressive",female:"en-AU_HeidiExpressive"},"es-ES":{male:"es-ES_EnriqueV3Voice",female:"es-ES_LauraV3Voice"},"es-LA":{female:"es-LA_SofiaV3Voice"},"es-US":{female:"es-US_SofiaV3Voice"},"fr-FR":{male:"fr-FR_NicolasV3Voice",female:"fr-FR_ReneeV3Voice"},"fr-CA":{female:"fr-CA_LouiseV3Voice"},"de-DE":{male:"de-DE_DieterV3Voice",female:"de-DE_BirgitV3Voice"},"it-IT":{female:"it-IT_FrancescaV3Voice"},"pt-BR":{male:"pt-BR_LucasExpressive",female:"pt-BR_IsabelaV3Voice"},"ja-JP":{female:"ja-JP_EmiV3Voice"},"ko-KR":{female:"ko-KR_JinV3Voice"}};var m=n(4095),d=n(4289);const f=n(7989);function h(){const[e,a]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[g,S]=(0,r.useState)(""),[x,b]=(0,r.useState)(!1),[N,E]=(0,r.useState)(!1),[v,y]=(0,r.useState)(""),k=(0,s.useRouter)(),w={"":"Preferred Language",...o.$,...o.e},j=m.E.getState().meetingInfo,{prepareStreaming:A}=f,[C,B]=(0,r.useState)(!1),V=(0,r.useRef)(!1),[R,I]=(0,r.useState)(!1),[U,P]=(0,r.useState)(!1);(0,r.useEffect)((()=>{V.current||(V.current=!0,async function(){try{const{mic:e,cam:a}=await async function(){const e=await navigator.permissions.query({name:"microphone"}),a=await navigator.permissions.query({name:"camera"});return{mic:e.state,cam:a.state}}();if("granted"!==e||"granted"!==a){console.log("Requesting media permissions...");const e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!0});console.log("Permissions granted!"),e&&e.getTracks().forEach((e=>e.stop())),B(!0)}else console.log("Permissions already granted."),B(!0)}catch(e){B(!1),console.error("Error accessing media devices:",e),alert("Please enable microphone and camera permissions in your browser settings.")}}())}),[]);(0,r.useEffect)((()=>{(async()=>{let e=(await Promise.all([n.e(929),n.e(620)]).then(n.t.bind(n,2858,23))).default,a=e.createClient({mode:"rtc",codec:"vp8"});m.E.setState({agoraInstance:e}),m.E.setState({agoraClient:a})})()}),[]);const L=async()=>{const a=await fetch("".concat(l.J,"/api/streaming/token?channel=").concat(g.trim(),"&uid=").concat(e.trim())),{token:n,appId:t}=await a.json();return{token:n,appId:t}};(0,r.useEffect)((()=>{const e=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=u[e];if(n||(n=c[e]),!n)return null;if(!a)return n;const t=n[a.toLowerCase()];if(t)return t;return n.male||n.female||null}(h);b(null===e||void 0===e?void 0:e.male),E(null===e||void 0===e?void 0:e.female)}),[h]);return(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 px-4",children:(0,t.jsxs)("div",{className:"w-full items-center max-w-md bg-white rounded-3xl shadow-2xl p-8",children:[(0,t.jsx)("img",{className:"m-auto h-24 mb-4",src:"/nabu-web/Nabu-Logo.jpg"}),(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-1",children:"Nabu Meeting"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Enter details to join the meeting"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("input",{type:"text",value:e,onChange:e=>a(e.target.value),placeholder:"Your name",className:"h-16 w-full px-4 py-2 border border-black rounded-xl focus:outline-none focus:ring focus:border-blue-500 text-lg"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("select",{value:h,onChange:e=>{return a=e.target.value,void p(a);var a},className:"appearance-none h-16 w-full px-4 py-2 border border-black rounded-xl focus:outline-none focus:ring focus:border-blue-500 text-lg",children:Object.keys(w).map((e=>(0,t.jsxs)("option",{value:e,children:[w[e]," "]},e)))}),(0,t.jsx)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-black",children:(0,t.jsx)(i,{})})]}),h&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-black text-xl mb-2",children:"Want to be heard as"}),(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-2 text-xl",children:[(0,t.jsx)("input",{disabled:!x,onClick:()=>y("male"),type:"radio",className:"w-6 h-6 text-blue-500 focus:ring-blue-500",name:"option",value:"male"}),(0,t.jsx)("span",{children:"He"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2 text-xl",children:[(0,t.jsx)("input",{disabled:!N,onClick:()=>y("female"),type:"radio",className:"w-6 h-6 text-red-500 focus:ring-red-500",name:"option",value:"female"}),(0,t.jsx)("span",{children:"She"})]})]}),(0,t.jsxs)("div",{className:"text-red-500",children:[x&&!N&&"Only male voice available",N&&!x&&"Only female voice available"]})]}),(0,t.jsx)("input",{type:"text",value:g,onChange:e=>S(e.target.value),placeholder:"Room name",className:"h-16  w-full px-4 py-2 border border-black rounded-xl  focus:outline-none focus:ring focus:border-blue-500 text-lg"}),(0,t.jsxs)("div",{className:"flex space-x-6",children:[(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:R,onChange:e=>I(e.target.checked),className:"form-checkbox h-5 w-5 text-blue-600"}),(0,t.jsx)("span",{className:"text-gray-800",children:"Non Verbal"})]}),(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:U,onChange:e=>P(e.target.checked),className:"form-checkbox h-5 w-5 text-blue-600"}),(0,t.jsx)("span",{className:"text-gray-800",children:"Hearing Impaired"})]})]}),(0,t.jsx)("button",{onClick:async()=>{if(!e.trim())return alert("Please enter your name");if(!h)return alert("Please select a language");if(!g.trim())return alert("Please enter a room name");if(!v.trim())return alert("Please select a voice option");if(!C)return alert("Please grant permissions for accessing microphone and camera");let{token:a,appId:n}=await L();a&&n||(a="",n=""),(0,d.yt)(g,e),m.E.setState({meetingInfo:{...j,name:e,language:h,room:g,gender:v,appId:n,token:a,nonVerbal:R,hearingImpaired:U}}),A(h),setTimeout((()=>{k.push("/meeting")}),1e3)},className:"h-16 w-full py-2 text-xl bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition",children:"Join Meeting"})]})]})})}},8504:function(e,a,n){"use strict";n.d(a,{J:function(){return t}});const t="https://nabu-0390bfe7dc2f.herokuapp.com"},1645:function(e,a,n){"use strict";n.d(a,{$:function(){return t},e:function(){return r}});const t={"ar-AE":"Arabic (Gulf)","ca-ES":"Catalan","cmn-CN":"Chinese (Mandarin)","cs-CZ":"Czech","da-DK":"Danish","nl-BE":"Dutch (Belgian)","nl-NL":"Dutch","en-AU":"English (Australian)","en-GB":"English (British)","en-IN":"English (Indian)","en-NZ":"English (New Zealand)","en-SG":"English (Singaporean)","en-ZA":"English (South African)","en-US":"English (US)","en-GB-WLS":"English (Welsh)","fi-FI":"Finnish","fr-FR":"French","fr-BE":"French (Belgian)","fr-CA":"French (Canadian)","hi-IN":"Hindi","de-DE":"German","de-AT":"German (Austrian)","de-CH":"German (Swiss standard)","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","ko-KR":"Korean","nb-NO":"Norwegian","pl-PL":"Polish","pt-BR":"Portuguese (Brazilian)","pt-PT":"Portuguese (European)","ro-RO":"Romanian","ru-RU":"Russian","es-ES":"Spanish (Spain)","es-MX":"Spanish (Mexican)","es-US":"Spanish (US)","sv-SE":"Swedish","tr-TR":"Turkish","cy-GB":"Welsh"},r={"en-AU":"English (Australian)","en-GB":"English (British)","en-NZ":"English (New Zealand)","en-US":"English (US)","fr-FR":"French","fr-CA":"French (Canadian)","de-DE":"German","it-IT":"Italian","ja-JP":"Japanese","ko-KR":"Korean","pt-BR":"Portuguese (Brazilian)","es-ES":"Spanish (European)","es-US":"Spanish (US)"}},7977:function(e,a,n){"use strict";n.d(a,{Z:function(){return c}});var t=n(4090);const r=e=>{const a=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,a,n)=>n?n.toUpperCase():a.toLowerCase())))(e);return a.charAt(0).toUpperCase()+a.slice(1)},s=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return a.filter(((e,a,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===a)).join(" ").trim()},i=e=>{for(const a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o=(0,t.forwardRef)(((e,a)=>{let{color:n="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:m,iconNode:d,...f}=e;return(0,t.createElement)("svg",{ref:a,...l,width:r,height:r,stroke:n,strokeWidth:c?24*Number(o)/Number(r):o,className:s("lucide",u),...!m&&!i(f)&&{"aria-hidden":"true"},...f},[...d.map((e=>{let[a,n]=e;return(0,t.createElement)(a,n)})),...Array.isArray(m)?m:[m]])})),c=(e,a)=>{const n=(0,t.forwardRef)(((n,i)=>{let{className:l,...c}=n;return(0,t.createElement)(o,{ref:i,iconNode:a,className:s("lucide-".concat((u=r(e),u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),l),...c});var u}));return n.displayName=r(e),n}},4289:function(e,a,n){"use strict";n.d(a,{Ie:function(){return S},SQ:function(){return m},SS:function(){return g},aT:function(){return h},bE:function(){return d},e$:function(){return p},vP:function(){return f},wQ:function(){return x},yt:function(){return u}});var t=n(4095),r=n(8504);let s=null;const i=new Set,l=new Set,o=new Set,c=new Set;function u(e,a){return s||(s=new WebSocket("".concat(r.J,"?room=").concat(e,"&uid=").concat(a)),s.onopen=()=>{console.log("[NABU WS] Connected to room ".concat(e)),setInterval((()=>{s&&s.readyState===WebSocket.OPEN&&s.send("keep-alive")}),3e4)},s.onerror=n=>{console.error("[NABU WS] WebSocket error",n),s.close(),s=null,console.error("[NABU WS] WebSocket Reconnecting",n),s=new WebSocket("".concat(r.J,"?room=").concat(e,"&uid=").concat(a))},s.onclose=()=>{console.warn("[NABU WS] Disconnected"),s=null},s.onmessage=e=>{try{const a=JSON.parse(e.data);if("hand"===a.type)i.forEach((e=>e(a.uid,a.raised)));else if("chat"===a.type)l.forEach((e=>e(a.uid,a.text,a.sourceLanguage)));else if("mute"===a.type)o.forEach((e=>e(a.uid,a.muted)));else if("transcript"===a.type){t.E.getState().setActiveSpeaker(a.uid),c.forEach((e=>e(a.uid,a.transcript,a.sourceLanguage,a.audioHeardAs)))}else if("room-state"===a.type){const{raisedHands:e,mutedUsers:n}=a,r=t.E.getState();Object.entries(e||{}).forEach((e=>{let[a,n]=e;r.setHandState(a,n)})),Object.entries(n||{}).forEach((e=>{let[a,n]=e;r.setMuteState(a,n)}))}}catch(a){console.warn("[NABU WS] Invalid message",e.data)}},s)}function m(e,a){s&&s.readyState===WebSocket.OPEN&&s.send(JSON.stringify({type:"hand",uid:e,raised:a}))}function d(e,a,n){s&&s.readyState===WebSocket.OPEN&&s.send(JSON.stringify({type:"chat",uid:e,text:a,sourceLanguage:n}))}function f(e,a){s&&s.readyState===WebSocket.OPEN&&(console.log("[NABU] Sending Mute for user, ".concat(e," with state: ").concat(a)),s.send(JSON.stringify({type:"mute",uid:e,muted:a})))}function h(e,a,n,t){s&&s.readyState===WebSocket.OPEN&&s.send(JSON.stringify({type:"transcript",uid:e,transcript:a,sourceLanguage:n,audioHeardAs:t}))}function p(e){return i.add(e),()=>{i.delete(e)}}function g(e){return l.add(e),()=>{l.delete(e)}}function S(e){return o.add(e),()=>{o.delete(e)}}function x(e){return c.add(e),()=>{c.delete(e)}}}},function(e){e.O(0,[37,174,971,69,744],(function(){return a=925,e(e.s=a);var a}));var a=e.O();_N_E=a}]);